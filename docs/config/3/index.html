<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/sl/component---src-layouts-index-js-1655bf00c6208e2b121a.js" as="script"/><link rel="preload" href="/sl/component---src-templates-documentation-js-4b0c5f930dbf492d32eb.js" as="script"/><link rel="preload" href="/sl/path---docs-config-3-9e86200efaefc1e9fa2f.js" as="script"/><link rel="preload" href="/sl/app-9416447f7dfc2a8bad32.js" as="script"/><link rel="preload" href="/sl/commons-19d79a17a09d63cc1b27.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"231608221292675":"app-9416447f7dfc2a8bad32.js","148510041631291":"component---src-templates-redirect-js-0387a4119853d0422d27.js","257299246428946":"component---src-templates-documentation-js-4b0c5f930dbf492d32eb.js","162898551421021":"component---src-pages-404-js-47bf3d5c9fc056d6f914.js","220445717415976":"component---src-pages-docs-js-349b838d828caa26ae77.js","35783957827783":"component---src-pages-index-js-349b838d828caa26ae77.js","60335399758886":"path----557518bd178906f8d58a.js","207607444774565":"path---docs-config-303b56b6b8eff5757338.js","252916380910354":"path---docs-config-1-edab3859b758fbf6df4d.js","30517571101605":"path---docs-config-2-0dfb9da6d6f3f4aabfc3.js","154662775827693":"path---docs-config-3-9e86200efaefc1e9fa2f.js","102553297614329":"path---docs-config-4-39f8c7e4fd575a068d9d.js","13772568562342":"path---docs-config-5-c864068954eb8b81646d.js","189349151444403":"path---docs-config-6-f5f2e6db6aadeb9accd2.js","59921319215614":"path---docs-config-7-8d2fa47c2acb786e2cbe.js","234853530556015":"path---docs-config-8-f55bd57f17acdc138dad.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","131064894521161":"path---docs-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-a0e39f21c11f6a62c5ab.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-1655bf00c6208e2b121a.js"}
            //]]>
            </script><style type="text/css" data-styled-components="QgWiq fdxCvc bCJHnt eCqvNs cSjYwS hGknXC cwazCA cYXfOo hakkzn" data-styled-components-is-local="true">/* sc-component-id: sc-bwzfXH */

.QgWiq{border-bottom:1px solid #f0f0f0;position:fixed;top:0;left:0;background:white;width:100%;z-index:99;height:50px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-between;-webkit-justify-content:space-between;-ms-flex-pack:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid rgba(1,1,1,.6);background-color:rgb(47,47,47);}.QgWiq .header-main{width:1200px;margin:0 50px;height:50px;}.QgWiq ul{padding:0;list-style:none;margin:0;}.QgWiq li{display:inline-block;margin:0 1em;}.QgWiq a{color:inherit;font-weight:inherit;text-decoration:none;}.QgWiq .active{color:#345;font-weight:600;}
/* sc-component-id: sc-htpNat */

.fdxCvc{position:fixed;padding:0 2em 4em 2em;height:100vh;width:15%;overflow:auto;background:#f9fbfd;border-right:1px solid #f0f0f0;}@media only screen and (max-width:650px){.fdxCvc{width:100%;position:relative;height:auto;border-right:0;border-bottom:1px solid #f0f0f0;}}
/* sc-component-id: sc-bxivhb */

.bCJHnt{list-style:none;padding:0;margin-top:2em;}

.cSjYwS{list-style:none;padding:0;margin-top:1em;}
/* sc-component-id: sc-ifAKCX */

.eCqvNs{margin:0 0 1em 0;padding:0;font-weight:600;}.eCqvNs a{color:inherit;text-decoration:none;}.eCqvNs a.active{color:#345;font-weight:600;}

.hGknXC{margin:0 0 1em 0;padding:0;font-weight:600;font-weight:400;font-size:.8rem;margin-left:1em;margin-bottom:.75em;}.hGknXC a{color:inherit;text-decoration:none;}.hGknXC a.active{color:#345;font-weight:600;}
/* sc-component-id: sc-gZMcBi */

.cwazCA{float:left;width:60%;margin-left:20%;padding:2em 4em;}@media only screen and (max-width:650px){.cwazCA{width:100%;margin:0;}}
/* sc-component-id: sc-gqjmRU */

.hakkzn code{background:#f4f7fb;padding:0 0.25em;font-size:0.95em;border-radius:3px;font-family:;}.hakkzn .gatsby-highlight pre{background:#f9fbfd;border:1px solid #ececec;border-radius:3px;padding:0.5em 1em;overflow:auto;margin:0 0 1em 0;}.hakkzn .gatsby-highlight code{background:none;color:inherit;padding:0;border-radius:0;}.hakkzn table{border:1px solid #ececec;overflow:hidden;border-collapse:separate;border-spacing:0;width:100%;margin:1em 0;border-radius:3px;}.hakkzn th{font-weight:600;}.hakkzn h3{margin:0.5em 0;}.hakkzn th:empty{display:none;}.hakkzn td,.hakkzn th{text-align:left;padding:0.375em 0.75em 0.375em 0.75em;}.hakkzn td{line-height:1.75em;vertical-align:top;}.hakkzn .bordered-table table{border-width:0 1px 1px 0;}.hakkzn .bordered-table td,.hakkzn .bordered-table th{border:1px solid #ececec;border-right:0;border-bottom-width:0;}.hakkzn .fixed-table table{table-layout:fixed;}.hakkzn .attributes-table td{line-height:1.5em;}.hakkzn .attributes-table td:first-child{text-align:right;line-height:1em;}.hakkzn .attributes-table strong{white-space:nowrap;}.hakkzn small{color:#888;display:block;margin-top:0.25em;font-size:0.8em;font-weight:400;line-height:1em;}.hakkzn img{display:block;margin:1rem auto;width:98%;}
/* sc-component-id: sc-VigVT */

.cYXfOo{padding:0 0 0.25em 0;margin-bottom:1.5em;border-bottom:1px solid #DDD;}.cYXfOo h1{margin-top:0;margin-bottom:0.5em;}
</style><title data-react-helmet="true">缓存规则</title><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = location.hash.replace('#', '')
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/sl/commons-19d79a17a09d63cc1b27.js","/sl/app-9416447f7dfc2a8bad32.js","/sl/path---docs-config-3-9e86200efaefc1e9fa2f.js","/sl/component---src-templates-documentation-js-4b0c5f930dbf492d32eb.js","/sl/component---src-layouts-index-js-1655bf00c6208e2b121a.js"
])
  </script><style id="gatsby-inlined-css">*{position:relative;box-sizing:border-box}body{margin:0;padding:0;font-family:Muli,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;color:#333}h1,h2,h3,h4,h5,h6{margin:1.25em 0 .666666667em}h1{font-size:1.8em}h1,h2{font-weight:600}h2{font-size:1.5em}h3{font-size:1.25em}h3,h4{font-weight:600}h4{font-size:1.15em}h5{font-size:1em}h5,h6{font-weight:600}h6{font-size:.875em}p{line-height:1.75em;margin:0 0 1em}hr{border:1px solid #f0f0f0}a,a:hover{color:#2097e4}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="674930458"><!-- react-empty: 2 --><div data-reactid="3"><!-- react-empty: 4 --><div data-reactid="5"><header class="sc-bwzfXH QgWiq" data-reactid="6"><div class="header-main" data-reactid="7"><img style="height:26px;margin-top:12px;" src="/baishan-white-logo.svg" data-reactid="8"/></div></header><div style="height:50px;" data-reactid="9"></div></div><nav class="sc-htpNat fdxCvc" data-reactid="10"><ul class="sc-bxivhb bCJHnt" data-reactid="11"><li class="sc-ifAKCX eCqvNs" data-reactid="12"><a href="/sl/docs/config/1" data-reactid="13">用户指南</a><ul class="sc-bxivhb cSjYwS" data-reactid="14"><li class="sc-ifAKCX hGknXC" data-reactid="15"><a class="" href="/sl/docs/config/1" data-reactid="16">源站配置</a></li><li class="sc-ifAKCX hGknXC" data-reactid="17"><a class="" href="/sl/docs/config/2" data-reactid="18">回源HOST</a></li><li class="sc-ifAKCX hGknXC" data-reactid="19"><a class="active" href="/sl/docs/config/3" data-reactid="20">缓存规则</a></li><li class="sc-ifAKCX hGknXC" data-reactid="21"><a class="" href="/sl/docs/config/4" data-reactid="22">IP黑名单</a></li><li class="sc-ifAKCX hGknXC" data-reactid="23"><a class="" href="/sl/docs/config/5" data-reactid="24">Referer黑白名单</a></li><li class="sc-ifAKCX hGknXC" data-reactid="25"><a class="" href="/sl/docs/config/6" data-reactid="26">HTTP头配置</a></li><li class="sc-ifAKCX hGknXC" data-reactid="27"><a class="" href="/sl/docs/config/7" data-reactid="28">跟随301/302跳转</a></li><li class="sc-ifAKCX hGknXC" data-reactid="29"><a class="" href="/sl/docs/config/8" data-reactid="30">限速规则</a></li></ul></li></ul></nav><main class="sc-gZMcBi cwazCA" data-reactid="31"><header class="sc-VigVT cYXfOo" data-reactid="32"><h1 data-reactid="33">缓存规则</h1><!-- react-text: 34 --><!-- /react-text --></header><div class="sc-gqjmRU hakkzn" data-reactid="35"><ul>
<li>配置指引</li>
<li>配置案例</li>
</ul>
<p>缓存配置是指CDN节点在缓存资源时所遵循的一套过期淘汰规则。CDN缓存的资源都有一定的过期时间；在资源未过期时，接受到请求时由节点响应；在资源过期时，节点会请求源站重新缓存，并将资源发给用户。过期时间和缓存的文件类型可以在控制台配置，如果没有配置缓存规则，则根据源站响应的缓存头部（cache-control、Expires等）缓存。</p>
<h3 id="配置指引"><a href="#%E9%85%8D%E7%BD%AE%E6%8C%87%E5%BC%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置指引</h3>
<ol>
<li>
<p>登录控制台，在左侧菜单栏域名管理内选择【域名配置】，选择域名，再选择【添加配置】，选择【缓存】。</p>
<p><img src="/image/image-20181129222435764.png" alt="image-20181129222435764"></p>
<p><img src="/image/image-20181115163604828.png" alt="image-20181115163604828"></p>
<p><img src="/image/image-20181115163816581.png" alt="image-20181115163816581"></p>
</li>
<li>
<p>点击【缓存规则】，即可开始缓存规则的配置。</p>
<p><img src="/image/image-20181115164127212.png" alt="image-20181115164127212"></p>
</li>
<li>
<p>如果需要配置不缓存规则，则需添加【不缓存规则】功能项。缓存规则和不缓存规则为两个独立的功能项。</p>
<p><img src="/image/image-20181115214804405.png" alt="image-20181115214804405"></p>
<p><img src="/image/image-20181115215202286.png" alt="image-20181115215202286"></p>
</li>
<li>
<p>缓存配置各个参数含义</p>
<ul>
<li>URL：指定缓存或者不缓存的文件类型。可支持列表内指定的文件类型，也可以通过正则表达式指定。</li>
<li>忽略不缓存头：开启该功能，可忽略源站返回Cache-Control:no-cache等不缓存头部时，让文件强制根据配置的缓存时间进行缓存。如果源站返回了不缓存头部，并且没有开启此功能，文件将不缓存。</li>
<li>忽略过期时间：打开该开关，可忽略源站返回的Cache-Control：max-age、Last-Modified、Expires的头部，此时文件将根据配置的缓存时间进行缓存。否则将根据源站返回的缓存时间进行缓存。</li>
<li>去除？缓存：打开该开关，CDN将忽略URL中第一个“？”后面的所有参数进行缓存，并且回源时也会去掉这些参数回源。如果需要将资源在CDN节点去参数缓存，但回源需要带参数，请联系白山值班同事配置。</li>
</ul>
</li>
<li>
<p>注意事项</p>
<ul>
<li>
<p>当配置多条缓存规则时，规则在前，则优先级越高。可通过拖动对应的规则项，进行多条规则的优先级排序。</p>
</li>
<li>
<p>如需配置文件不缓存，则需要添加【不缓存规则】。如果在【缓存规则】中设定缓存时间为0，客户请求时CDN节点会优先响应节点缓存的内容，再回源重新拉取。</p>
</li>
</ul>
</li>
</ol>
<h3 id="配置案例"><a href="#%E9%85%8D%E7%BD%AE%E6%A1%88%E4%BE%8B" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>配置案例</h3>
<p>域名blog4.lowxp.com，配置缓存规则：</p>
<ol>
<li>缓存规则：mp4去参数缓存3天，并且忽略源站的不缓存头。其他文件缓存1天。</li>
<li>不缓存规则：html和ico文件不缓存。</li>
</ol>
<p><img src="/image/image-20181115221313124.png" alt="image-20181115221313124"></p>
<p>配置完成【点击发布】并【确认保存】即可让配置生效</p>
<p><img src="/image/image-20181115222619790.png" alt="image-20181115222619790"></p>
<p><img src="/image/image-20181115222824171.png" alt="image-20181115222824171"></p>
<p>由于mp4的缓存规则在.*(表示所有文件)缓存规则之前，所以mp4缓存3天的优先级高于其他文件缓存1天的规则。您可以拖动缓存规则功能栏来调整缓存规则优先级。同时不缓存规则在缓存规则之前，所以ico、html的不缓存规则优先级高于缓存规则。如图配置的优先级为：html、ico不缓存 > mp4缓存3天 > 其他文件缓存1天 。</p></div></main></div></div></div><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-53870770-5', 'auto');
  
  ga('send', 'pageview');
      </script></body></html>